# Mainstreet Finance - smsUSD (Staked msUSD)

## Basic information

- **Chain**: Sonic
- **Address**: `0xc7990369DA608C2F4903715E3bD22f2970536C29`
- **Contract name**: smsUSD Token (StakedmsUSD)
- **Contract type**: ERC-4626 vault (upgradeable proxy - ERC-1967)
- **Explorer link**: https://sonicscan.org/address/0xc7990369DA608C2F4903715E3bD22f2970536C29
- **Protocol name**: Mainstreet Finance (Main Street)
- **Deployer**: `0xe0f9d2797082797bb7361c6e26b42d68c9da5c56` (Mainstreet: Deployer)

## Protocol links

- **Website**: https://mainstreet.finance/
- **Documentation**: https://mainstreet-finance.gitbook.io/mainstreet.finance
- **Twitter/X**: https://x.com/Main_St_Finance
- **GitHub repository**: https://github.com/Mainstreet-Labs/mainstreet-core
- **DefiLlama**: https://defillama.com/stablecoin/main-street-usd

## Contract addresses (Sonic - Legacy)

| Contract | Address |
|----------|---------|
| msUSDV2 Token | `0xE5Fb2Ed6832deF99ddE57C0b9d9A56537C89121D` |
| smsUSD Token | `0xc7990369DA608C2F4903715E3bD22f2970536C29` |
| msUSDSilo | `0xecC73952d38E98D37Cb0151615dFDB73af65FF6c` |
| Mint/Redeem | `0xb1E423c251E989bd4e49228eF55AC4747D63F54D` |

## Contract addresses (Sonic - Current)

| Contract | Address |
|----------|---------|
| msUSDV2 | `0x4ba01f22827018b4772CD326C7627FB4956A7C00` |
| Minter | `0x70C0c12fBb3acFFf8E48aBf027436971cF2Ade14` |
| msY | `0x890A5122Aa1dA30fEC4286DE7904Ff808F0bd74A` |
| msYBridger | `0x22eB4e61FE4D4e31113979e8b1F4377D46bc98F2` |
| msUSDSilo | `0x6f188821283923953121f35d74E69a5e73EA6871` |
| FeeSilo | `0x6665efDe9f1916a9e16f7f955375ecD392b98B81` |
| CustodianManager | `0x4cC94169605069DDf82C815493Cf6048f1935D0A` |
| USDC Oracle | `0x098e47096856eb292D8B2D379b74E987E23CD2Af` |

## Protocol overview

Main Street Finance is a synthetic USD stablecoin ecosystem built on multi-asset collateralisation. The protocol delivers institutional-grade delta-neutral yield strategies through a dual-token system:

- **msUSD**: The base synthetic stablecoin (non-yield-bearing), always redeemable 1:1 for USDC
- **smsUSD**: The staked version of msUSD that earns yield from protocol trading strategies

### How it works

1. Users deposit USDC to mint msUSD
2. msUSD can be staked into smsUSD (an ERC-4626 vault) to earn yield
3. The underlying USDC is deployed into options arbitrage strategies (CME index box spreads)
4. Yields are distributed to smsUSD holders through automatic exchange rate appreciation

### Key features

- **Cross-chain**: Built on LayerZero's OFT standard for omnichain functionality
- **Cooldown system**: Configurable withdrawal delay (currently 7 days default, max 90 days)
- **KYC required**: Users must be whitelisted to mint msUSD

## Fee information

### Protocol fees (deducted from gross yields)

| Fee | Percentage |
|-----|------------|
| Insurance fund | 10% |
| Treasury | 10% |
| User distribution | 80% |

### Smart contract fees

- **taxRate**: Configurable percentage (out of 1000) sent to feeSilo upon reward distribution
- **Mint tax**: Configurable fee applied during msUSD minting
- **coverageRatio**: Default 1e18 (100%), can be reduced in undercollateralised scenarios

## Audit reports

### WatchPug Security Audit 1 (July 2025)
- **Scope**: Mainstreet v2 smart contract system
- **Findings**: 11 total (1 medium, 4 low, 6 informational)
- **Status**: 4 fixed, 7 acknowledged
- **PDF**: [Mainstreet_v2_Audit_Report_by_WatchPug.pdf](https://2732132553-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FvwA4hjA4e9xA076Qn9YB%2Fuploads%2FAj3iL1Prv4DjvzSyYQc0%2FMainstreet_v2_Audit_Report_by_WatchPug.pdf)
- **Audited commit**: https://github.com/Mainstreet-Labs/mainstreet-core/commit/65af88a4bca55696cf5cb052363c5f91b9a6b0a5

### WatchPug Security Audit 2 (December 2025)
- **Scope**: StakedmsUSD and msYBridger
- **PDF**: [Mainstreet_StakedmsUSD_&_msYBridger_Audit_Report_by_WatchPug_rev2.pdf](https://2732132553-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FvwA4hjA4e9xA076Qn9YB%2Fuploads%2FAJagbBCXLwuilwiGIzx6%2FMainstreet_StakedmsUSD_%26_msYBridger_Audit_Report_by_WatchPug_rev%202.pdf)

## Technical notes

- The smsUSD contract (StakedmsUSD) is an ERC-4626 liquid staking vault
- Uses UUPS upgradeable proxy pattern (OpenZeppelin ERC-1967)
- Minimum shares requirement (MIN_SHARES = 1 ether) for donation attack protection
- Compiled with Solidity v0.8.20, 200 optimisation runs, Shanghai EVM

## Notes

- Smart contracts are developed by Mainstreet Labs (https://github.com/Mainstreet-Labs)
- The smsUSD token at `0xc7990369DA608C2F4903715E3bD22f2970536C29` is listed as a "Legacy" contract in the documentation; current contracts may use different addresses
- Protocol is similar to Ethena but uses options arbitrage instead of basis trading for yield generation
- Active integrations with Pendle, Beets V3, and other Sonic DeFi protocols
